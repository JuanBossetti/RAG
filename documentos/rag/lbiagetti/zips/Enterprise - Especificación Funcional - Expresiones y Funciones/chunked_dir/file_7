2.2 Contextos 
 Como mencionamos, el contexto es una parte fundamental de la expresión, ya que depende de él si la sintaxis de la misma es correcta o no. El contexto nos permite identificar cuáles son los operandos que podemos utilizar en nuestra fórmula. Una misma expresión en contextos diferentes, deja de tener sentido o directamente: muestra mensaje de error. 
 Para comprender a qué nos referimos, supongamos que estamos posicionados en una factura y queremos saber el nombre del cliente y si es de tipo mayorista. Como buscamos obtener el nombre del Cliente, requerimos alguna manera de navegar entre los diferentes contextos. Para solucionar esto, dentro del lenguaje de Expresiones provisto por FastPrg, existe el operador “.”. 
 Este operador se utiliza para navegar entre distintos atributos de tipo referencia, colecciones, compuestos, acumuladores y secuencias. En este sentido, si deseamos acceder al nombre del cliente desde la factura, simplemente escribimos la expresión 
 Cliente.Nombre 
 Por ejemplo, para escribir un correo electrónico, podemos comenzar con “Hola ” + Cliente.Nombre, donde el operador de adición (“+”) une el saludo con el nombre. 
 Entonces, si el contexto inicial era la entidad Factura, al escribir “Cliente.” este cambia automáticamente. El nuevo contexto es la entidad Cliente, es decir, el cliente relacionado con la factura que estamos haciendo. En este caso, recurrimos al nombre, pero también podemos acceder a la ciudad, a sus direcciones; a cualquier atributo de dicha entidad. De este modo, tenemos toda la entidad a disposición a través del operador “.” 
 Volviendo al ejemplo planteado al comienzo de la capacitación, para corroborar si un cliente es mayorista, escribimos desde la factura, la expresión Cliente.Tipo = “Mayorista” 
 Ahora, imaginemos que estamos creando una expresión con contexto en la colección Descuentos de los Ítems de Factura. Entonces, tenemos la entidad Factura con una colección de ítems, y para cada uno de estos, una colección de descuentos. A esta segunda colección podemos llamarla subordinada o de segundo nivel. En caso de que, desde la colección de Descuentos, quisiéramos acceder al número del comprobante, esto sería imposible, ya que no se encuentra en el mismo contexto. 
 Sin embargo, si escribimos “Esta instancia.”, haremos referencia a la instancia completa, es decir, a la Factura actual. Desde aquí, por ejemplo, podemos acceder al Total, al Cliente y a los Ítems, puesto que el 
 nuevo contexto pasa a ser la entidad Factura. Es decir, las expresiones Esta instancia.Total, Esta instancia.Ítems y Esta instancia.Cliente serán válidas. 
 ¿Cuál es el significado de “Esta instancia”? Se trata de un atributo de sistema, elaborado por FastPrg, cada vez que se crea una entidad o colección. Esto quiere decir que dentro de la colección Ítems existe Esta instancia, como así también se halla en la colección Descuentos, y en la cabecera. ¿Para qué sirve, particularmente? ¿Qué utilidad tiene? Este atributo de sistema hace referencia a la instancia completa. Nos permite movernos a la cabecera de la instancia cuando estamos posicionados en una colección. 
 Por ejemplo, si quisiéramos conocer la cantidad de productos pertenecientes al rubro repuestos que se han vendido, podríamos hacerlo con la siguiente expresión: 
 EN Factura.Ítems CONTAR Producto CUANDO Producto.Rubro = ‘Repuestos’ 
 En caso de que además precisemos el número de productos de este rubro, que compró determinado cliente, deberíamos escribir: 
 EN Factura.Ítems CONTAR Producto CUANDO Producto.Rubro = ‘Repuestos’ y Esta Instancia.Cliente = ‘Logística Integral’ 
 Es muy importante dejar en claro que sin el atributo Esta instancia nunca podríamos acceder al cliente, ya que nuestro contexto actual son los ítems de la factura y el cliente se encuentra en la cabecera. 
 Supongamos ahora que seguimos posicionados en la colección de Descuentos de nuestra Factura. Nuestro contexto es ese. Si escribimos “Este ítem.”, haremos referencia al ítem completo del descuento. En este caso, el contexto no cambia, aunque veremos más adelante ejemplos de usos donde sí es relevante el atributo Este ítem. 
 Si escribimos “Ítem padre.”, nuestro contexto pasa a ser la colección de Ítems, aunque no completa, solo el ítem que es padre del ítem actual. Es decir, en nuestro ejemplo, estaríamos accediendo al ítem que tiene como producto “Carpeta”. Entonces, por ejemplo, la expresión Ítem padre.Subtotal nos retornaría $658. 
 Cabe destacar que el operador “.” no modifica el contexto de toda la expresión, sino el contexto del operando actual. Por ejemplo, con la siguiente expresión podemos conocer cuántos repuestos fueron facturados para los clientes de Argentina: 
 EN Factura.Ítems CONTAR Producto CUANDO Esta instancia.Cliente.País = “Argentina” y Producto.Rubro = “Repuestos” 
 Tal como observamos, nos adentramos en el contexto de cliente. Sin embargo, luego de especificar el país que es de nuestro interés, tuvimos la posibilidad de escribir Producto.Rubro dado que nuestro contexto nunca cambió. Conviene recordar que siempre podemos navegar con el operador “.”, ya sea dentro de la misma instancia con estos atributos de sistema, o entre atributos de tipo referencia, compuestos o colecciones. La única excepción la constituyen los atributos de un acumulador, en cuyo caso podemos navegar por sus dimensiones, pero no por sus atributos. 
 Veamos ahora gráficamente a qué podemos acceder posicionados en cada contexto de una entidad de ejemplo: Factura venta y cómo hacerlo. 
 